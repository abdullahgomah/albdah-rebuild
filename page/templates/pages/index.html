{% extends 'base.html' %}
{% load static %}



{% block title %}
    مكتب البداح للعقارات | الصفحة الرئيسية
{% endblock title %}
    


{% block stylesheets %}
    <!-- <link rel="stylesheet" href="{% static 'css/pages/main.css' %}"> -->
    <link rel="stylesheet" href="{% static 'css/pages/index.css' %}">
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
  />
  
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  
  <style>


    .swiper {
        min-width: 100%; 
        height: 100%;
      }
  
      .swiper-slide {
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
        width: fit-content !important;
      }
      .swiper-wrapper {
        column-gap: 1rem;
        padding: .5rem 0;
      }
  
      .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
  </style>
{% endblock stylesheets %}
    



{% block content %}

<style>
    .messages .success {
        list-style: none;
        background: #28a74580;
        color: white;
        width: 100%;
        min-height: 30px;
        padding: 1rem ;
        line-height: 30px;
        text-align: center;
    }
    .messages li {
        transition: all .2s ease-in-out;
    }

    .intro__title {
        font-family: "Rakkas", serif; 
        
    }
</style>

    
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

    <main>
        <div class="container">
            <div class="intro">
                <h1 class="intro__title">
                    <!-- البداح ... حلِّك بحِلِّك وترحالك -->
                    {{info.title}}
                </h1>
                <p>
                    <!-- تجربة آمنة تقدمها لكم مكاتب البداح للعقارات من خلال تقديم أفضل الخدمات والحلول التسويقية -->
                    {{info.slogan}}
                </p>
            </div>
            <div class="cta">
                <a class="btn btn-solid-success" id="search-filter-open-btn">ابحث عن عقار</a>
                <a href="{% url 'maps:search-with-map' %}" class="btn btn-solid-success">
                    بحث بالخريطة
                    <img src="{% static 'imgs/map-logo.svg.png' %}" alt="">
                </a>
                <a href="{% url 'property:add-property-interface' %}" class="btn btn-solid-success">إضافة عقار</a>
            </div>
        </div>
    </main>

    <section class="property_type">
        <div class="container">
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <a href="#" data-property_type="all" class="btn btn-solid">الكل</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="apartment_rent" class="btn btn-solid">شقق للإيجار</a>
                    </div>
                
                    <div class="swiper-slide">
                        <a href="#" data-property_type="floor_rent" class="btn btn-solid">دور للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="villa_rent" class="btn btn-solid">فيلا للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="shop_rent" class="btn btn-solid">محل للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="resthouse_rent" class="btn btn-solid">استراحة للإيجار</a>
                    </div>


                    <div class="swiper-slide">
                        <a href="#" data-property_type="commercial_office_rent" class="btn btn-solid">مكتب تجاري للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="land_rent" class="btn btn-solid">أرض للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="building_rent" class="btn btn-solid">عمارة للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="branch_rent" class="btn btn-solid">مستودع للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="furnished_apartment_rent" class="btn btn-solid">شقة مفروشة للإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" data-property_type="chalet_rent" class="btn btn-solid">شاليه للإيجار</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="land_sale" class="btn btn-solid">أرض للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="villa_sale" class="btn btn-solid">فيلا للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="apartment_sale" class="btn btn-solid">شقة للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="building_sale" class="btn btn-solid">عمارة للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="resthouse_sale" class="btn btn-solid">استراحة للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">مزرعة للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="shop_sale" class="btn btn-solid">محل للبيع</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" data-property_type="floor_sale" class="btn btn-solid">دور للبيع</a>
                    </div>
                </div>
                <!-- <div class="swiper-pagination"></div> -->
            </div>
        </div>
    </section>

    <section class="property_list">
        <div class="container">

            <div class="grid property_grid">
                
                {% for property in page_obj %}
                

                <div class="item property">
                    <input type="hidden" name="propertyFirstImgUrl" value="{{property.imgs.first.img.url}}">
                    <input type="hidden" name="property_type_input" value="{{property.p_type}}">
                    <div class="property__info">
                        <h4 class="property__title">
                            <a href="{% url 'property:property-details' property.number %}">{{property.title}}</a>
                        </h4>
                        <p class="property__price">
                            
                            {% if property.sale == True %}
                            {{property.price|floatformat:"0"}} ريال
                            {% else %}
                            {{property.price|floatformat:"0"}} ريال / <span>{{property.get_rent_type_display }}</span>
                            {% endif %}

                                
                        </p>
                        <p class="property__description">
                            <!-- {{property.description|safe|truncatewords:5}} -->
                        </p>
                    </div>
                    <div class="property__cover_img">
                    
                    
                        <img src="{% for img in property.imgs.all %}{% if img.main %}{{img.img.url}}{% endif %}{% endfor %}" alt="">
                        
                        
                    </div>
                </div>
                {% endfor %}


                <div class="pagination">
                    <div class="container">
                        <a href="?page=1">الأولى</a>
                        
                        {% if page_obj.has_previous %}
                            <a href="?page={{page_obj.previous_page_number}}">{{page_obj.previous_page_number}}</a>
                        {% endif %}

                        <a href="?page={{page_obj.number}}" class="current_page">{{page_obj.number}}</a>
                        
                        {% if page_obj.has_next %}
                            <a href="?page={{page_obj.next_page_number}}">{{page_obj.next_page_number}}</a>
                        {% endif %}

                        <a href="?page={{paginator.num_pages}}">الأخيرة</a>
                            
                    </div>
                </div>


                <!-- <div class="pagination"> 
                    
                    <div class="container">
                        <span class="step-links">
                            {% if page_obj.has_previous %}
                                <a href="?page=1">&laquo; الأولى</a>
                                <a href="?page={{ page_obj.previous_page_number }}">السابقة</a>
                            {% endif %}
                    
                            <span class="current">
                                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                            </span>
                    
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">التالي</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}">الأخيرة &raquo;</a>
                            {% endif %}
                        </span>

                    </div>

                </div> -->

                    



            </div>

        </div>
    </section>

    <section class="search-filters">
        <div class="container">
            <div class="section__heading">
                <h3>ابحث عن عقار</h3>
                <div id="search-filter-close-btn">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>
            <div class="section__content">
                <div class="field"></div>
            </div>
        </div>
    </section>

    <script src="{% static 'js/pages/app.js' %}"></script>
    <script src="{% static 'js/pages/index.js' %}"></script>

    <script>
        let messages = document.querySelectorAll('.messages li'); 
        messages.forEach((msg) => { 
            if (msg) {
                setTimeout(()=> {
                    msg.style.display = 'none'
                }, 5000)
            }
        })

        let searchFilters = document.querySelector(".search-filters") 

        let searchFilterOpenBtn = document.querySelector('#search-filter-open-btn')
        searchFilterOpenBtn.addEventListener('click', () => {
            searchFilters.style.left = '0' ;
        })

        let searchFilterCloseBtn = document.querySelector('#search-filter-close-btn i') 
        searchFilterCloseBtn.addEventListener('click', () => {
            searchFilters.style.left = '-100%'; 
        })

    </script>


    {% endblock content %}

